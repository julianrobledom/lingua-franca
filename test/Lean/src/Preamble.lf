// Tests whether definitions declared in the preamble can be used in reactor
// declarations and reaction bodies.
target Lean

preamble {=
    inductive Custom | c
    def greeting := "hello"
=}

reactor Test {
    state s : Custom

    reaction(startup) {=
        let val := Custom.c
        assert! greeting = "hello"
    =}
}

main reactor {
    t = new Test()
}
